= Começando a usar o JBoss =
:author: Paulo Jerônimo
:email: pj@paulojeronimo.info

Como aluno e de um shell da máquina base, execute:
[source,bash]
----
$ ssh vm-centos
$ cd ~/curso-jboss
$ scp base:!$/instaladores/jboss-eap-6.2.0.zip .
$ unzip -o jboss-eap-6.2.0.zip > /tmp/unzip.log 
$ ln -s jboss-eap-6.2 jboss
$ export JAVA_HOME=/usr/lib/jvm/java
$ export JBOSS_HOME=~/jboss
$ export PATH=$JBOSS_HOME/bin:$PATH
$ echo $PATH | tr ':' '\n'
$ standalone.sh
# <Ctrl+Z>
$ bg
$ free -m
$ fg
# <Ctrl+C>
$ sed -i 's/1303/512/g' jboss/bin/standalone.conf
$ standalone.sh
# <Ctrl+C>
$ c=standalone.sh; nohup $c 2>&1 | tee /tmp/$c.log &
$ jps -Vvlm
10955 /home/aluno/jboss/jboss-modules.jar -mp /home/aluno/jboss/modules -jaxpmodule javax.xml.jaxp-provider org.jboss.as.standalone -Djboss.home.dir=/home/aluno/jboss -Djboss.server.base.dir=/home/aluno/jboss/standalone -D[Standalone] -XX:+UseCompressedOops -Xms512m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Dorg.jboss.boot.log.file=/home/aluno/jboss/standalone/log/server.log -Dlogging.configuration=file:/home/aluno/jboss/standalone/configuration/logging.properties
11036 sun.tools.jps.Jps -Vvlm -Dapplication.home=/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.45.x86_64 -Xms8m
$ ls -ld /proc/10955
dr-xr-xr-x. 8 aluno aluno 0 Dec 20 00:05 /proc/10955
$ cat /proc/10955/cmdline 
/usr/lib/jvm/java/bin/java-D[Standalone]-server-XX:+UseCompressedOops-Xms512m-Xmx512m-XX:MaxPermSize=256m-Djava.net.preferIPv4Stack=true-Djboss.modules.system.pkgs=org.jboss.byteman-Djava.awt.headless=true-Dorg.jboss.boot.log.file=/home/aluno/jboss/standalone/log/server.log-Dlogging.configuration=file:/home/aluno/jboss/standalone/configuration/logging.properties-jar/home/aluno/jboss/jboss-modules.jar-mp/home/aluno/jboss/modules-jaxpmodulejavax.xml.jaxp-providerorg.jboss.as.standalone-Djboss.home.dir=/home/aluno/jboss-Djboss.server.base.dir=/home/aluno/jboss/standalone
$ lsof -n -P -p 10955 | grep LISTEN
java    10955 aluno  265u  IPv4              30602      0t0    TCP 127.0.0.1:8080 (LISTEN)
java    10955 aluno  273u  IPv4              30605      0t0    TCP 127.0.0.1:9999 (LISTEN)
java    10955 aluno  276u  IPv4              30606      0t0    TCP 127.0.0.1:9990 (LISTEN)
java    10955 aluno  280u  IPv4              30608      0t0    TCP 127.0.0.1:4447 (LISTEN)
$ netstat -tulpn | grep 10955
(Not all processes could be identified, non-owned process info
 will not be shown, you would have to be root to see it all.)
tcp        0      0 127.0.0.1:9999              0.0.0.0:*                   LISTEN      10955/java          
tcp        0      0 127.0.0.1:8080              0.0.0.0:*                   LISTEN      10955/java          
tcp        0      0 127.0.0.1:4447              0.0.0.0:*                   LISTEN      10955/java          
tcp        0      0 127.0.0.1:9990              0.0.0.0:*                   LISTEN      10955/java           
$ kill 10955
$ 00:14:18,523 INFO  [org.apache.coyote.http11] (MSC service thread 1-2) JBWEB003075: Coyote HTTP/1.1 pausing on: http-/127.0.0.1:8080
00:14:18,533 INFO  [org.apache.coyote.http11] (MSC service thread 1-2) JBWEB003077: Coyote HTTP/1.1 stopping on : http-/127.0.0.1:8080
00:14:18,549 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-2) JBAS010409: Unbound data source [java:jboss/datasources/ExampleDS]
00:14:18,590 INFO  [org.apache.catalina.core] (MSC service thread 1-1) JBWEB001079: Container org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/] has not been started
00:14:18,653 INFO  [org.jboss.as] (MSC service thread 1-2) JBAS015950: JBoss EAP 6.2.0.GA (AS 7.3.0.Final-redhat-14) stopped in 148ms

[1]+  Done                    nohup $c 2>&1 | tee /tmp/$c.log
$ less -R /tmp/$c.log
$ rm -rf jboss jboss-eap-6.2
----
